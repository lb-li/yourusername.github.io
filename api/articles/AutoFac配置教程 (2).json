{"title":"AutoMapper配置教程","uid":"b84c84a24d4fbceb89d7a0429211000c","slug":"AutoFac配置教程 (2)","date":"2024-07-18T12:04:40.525Z","updated":"2024-07-19T08:08:46.419Z","comments":true,"path":"api/articles/AutoFac配置教程 (2).json","keywords":null,"cover":null,"content":"<h2 id=\"1-NuGet安装\"><a href=\"#1-NuGet安装\" class=\"headerlink\" title=\"1.NuGet安装\"></a>1.NuGet安装</h2><p>  在项目中安装 <code>AutoMapper</code> 包；</p>\n<h2 id=\"2-添加-AutoMapperConfigs-类到拓展文件夹\"><a href=\"#2-添加-AutoMapperConfigs-类到拓展文件夹\" class=\"headerlink\" title=\"2.添加 AutoMapperConfigs 类到拓展文件夹\"></a>2.添加 AutoMapperConfigs 类到拓展文件夹</h2><div class=\"language-csharp\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">csharp</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #F78C6C\">using</span><span style=\"color: #BABED8\"> AutoMapper</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">using</span><span style=\"color: #BABED8\"> System</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">using</span><span style=\"color: #BABED8\"> System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Collections</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Generic</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">using</span><span style=\"color: #BABED8\"> System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Linq</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">using</span><span style=\"color: #BABED8\"> System</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Threading</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Tasks</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">using</span><span style=\"color: #BABED8\"> CoreApiProject</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Model</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">using</span><span style=\"color: #BABED8\"> CoreApiProject</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">DTO</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">namespace</span><span style=\"color: #BABED8\"> CoreApiProject</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Api</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">class</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">AutoMapperConfigs</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Profile</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">        </span><span style=\"color: #676E95; font-style: italic\">//添加你的实体映射关系.</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">AutoMapperConfigs</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">            </span><span style=\"color: #676E95; font-style: italic\">//Entity 转 Dto</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #82AAFF\">CreateMap</span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #FFCB6B\">Good</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">GoodDto</span><span style=\"color: #89DDFF\">&gt;()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">     </span><span style=\"color: #676E95; font-style: italic\">//属性不一致匹配</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ForMember</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #FFCB6B\">dest</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=&gt;</span><span style=\"color: #BABED8\"> dest</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">TypeName</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">opt</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=&gt;</span><span style=\"color: #BABED8\"> opt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">MapFrom</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #FFCB6B\">src</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=&gt;</span><span style=\"color: #BABED8\"> src</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">TidNavigation</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Name</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">                </span><span style=\"color: #676E95; font-style: italic\">//映射发生之前</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">BeforeMap</span><span style=\"color: #89DDFF\">((</span><span style=\"color: #FFCB6B\">source</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">dto</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">                    </span><span style=\"color: #676E95; font-style: italic\">//可以较为精确的控制输出数据格式</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">                    </span><span style=\"color: #676E95; font-style: italic\">//dto.CreateTime = Convert.ToDateTime(source.CreateTime).ToString(&quot;yyyy-MM-dd&quot;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    dto</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">TypeName </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> source</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">TidNavigation</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Name</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&#125;)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">                </span><span style=\"color: #676E95; font-style: italic\">//映射发生之后</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">AfterMap</span><span style=\"color: #89DDFF\">((</span><span style=\"color: #FFCB6B\">source</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">dto</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">                    </span><span style=\"color: #676E95; font-style: italic\">//code ...</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&#125;)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ReverseMap</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">            </span><span style=\"color: #676E95; font-style: italic\">//UserDto转UserEntity.</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">            </span><span style=\"color: #676E95; font-style: italic\">//CreateMap();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h2 id=\"3-在管道中配置\"><a href=\"#3-在管道中配置\" class=\"headerlink\" title=\"3.在管道中配置\"></a>3.在管道中配置</h2><p> 配置Dto 模型映射<br>    <code>builder.Services.AddAutoMapper(AppDomain.CurrentDomain.GetAssemblies());</code></p>\n","feature":true,"text":"1.NuGet安装 在项目中安装 AutoMapper 包； 2.添加 AutoMapperConfigs 类到拓展文件夹csharpusing AutoMap...","permalink":"/post/AutoFac配置教程 (2)","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":".NET8 Api框架搭建","slug":"NET8-Api框架搭建","count":5,"path":"api/categories/NET8-Api框架搭建.json"}],"tags":[{"name":"AutoMapper","slug":"AutoMapper","count":1,"path":"api/tags/AutoMapper.json"},{"name":".NET","slug":"NET","count":4,"path":"api/tags/NET.json"},{"name":"映射","slug":"映射","count":1,"path":"api/tags/映射.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-NuGet%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">1.NuGet安装</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-%E6%B7%BB%E5%8A%A0-AutoMapperConfigs-%E7%B1%BB%E5%88%B0%E6%8B%93%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9\"><span class=\"toc-text\">2.添加 AutoMapperConfigs 类到拓展文件夹</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-%E5%9C%A8%E7%AE%A1%E9%81%93%E4%B8%AD%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">3.在管道中配置</span></a></li></ol>","author":{"name":"小刘","slug":"blog-author","avatar":"/images/1.jpg","link":"/","description":"一位正在重塑知识的技术人。作为一名.net后端程序员，我专注于前端和后端技术的开发，热衷于探索新技术并分享我的学习与实践经验。","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"使用 JWTBearer 实现验证授权","uid":"f3b472985f94ae032ebf7e46f5293bd9","slug":"使用 JWTBearer 实现验证授权","date":"2024-07-19T08:11:35.000Z","updated":"2024-07-19T08:21:49.082Z","comments":true,"path":"api/articles/使用 JWTBearer 实现验证授权.json","keywords":null,"cover":null,"text":"使用 JWTBearer 实现验证授权1. NuGet 安装 Microsoft.AspNetCore.Authentication.JwtBearer注意版本...","permalink":"/post/使用 JWTBearer 实现验证授权","photos":[],"count_time":{"symbolsCount":"8.8k","symbolsTime":"8 mins."},"categories":[{"name":".NET8 Api框架搭建","slug":"NET8-Api框架搭建","count":5,"path":"api/categories/NET8-Api框架搭建.json"}],"tags":[{"name":"JWT","slug":"JWT","count":1,"path":"api/tags/JWT.json"},{"name":"Authorization","slug":"Authorization","count":1,"path":"api/tags/Authorization.json"},{"name":".NET Core","slug":"NET-Core","count":1,"path":"api/tags/NET-Core.json"},{"name":"ASP.NET","slug":"ASP-NET","count":1,"path":"api/tags/ASP-NET.json"}],"author":{"name":"小刘","slug":"blog-author","avatar":"/images/1.jpg","link":"/","description":"一位正在重塑知识的技术人。作为一名.net后端程序员，我专注于前端和后端技术的开发，热衷于探索新技术并分享我的学习与实践经验。","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"EFCore配置教程","uid":"4e5f3f8fca52da9f9ff077c4a363f25c","slug":"EFCore配置教程","date":"2024-07-05T00:52:10.000Z","updated":"2024-07-19T08:00:37.399Z","comments":true,"path":"api/articles/EFCore配置教程.json","keywords":null,"cover":"https://cover.png","text":"1. 安装 EFCore 相关安装到Model 安装 Microsoft.EntityFrameworkCore.SqlServer 安装 Microsoft....","permalink":"/post/EFCore配置教程","photos":[],"count_time":{"symbolsCount":802,"symbolsTime":"1 mins."},"categories":[{"name":".NET8 Api框架搭建","slug":"NET8-Api框架搭建","count":5,"path":"api/categories/NET8-Api框架搭建.json"}],"tags":[{"name":".NET","slug":"NET","count":4,"path":"api/tags/NET.json"},{"name":"EFCore","slug":"EFCore","count":1,"path":"api/tags/EFCore.json"},{"name":"数据库","slug":"数据库","count":1,"path":"api/tags/数据库.json"}],"author":{"name":"小刘","slug":"blog-author","avatar":"/images/1.jpg","link":"/","description":"一位正在重塑知识的技术人。作为一名.net后端程序员，我专注于前端和后端技术的开发，热衷于探索新技术并分享我的学习与实践经验。","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}