{"title":"在 Vue 项目中添加 Pinia 和持久化插件","uid":"37033ad329e71964fe9e0f89c27987a0","slug":"在 Vue 项目中添加 Pinia 和持久化插件","date":"2024-07-19T08:11:35.000Z","updated":"2024-07-19T11:10:52.544Z","comments":true,"path":"api/articles/在 Vue 项目中添加 Pinia 和持久化插件.json","keywords":null,"cover":"/images/OIP-C.jpg","content":"<h2 id=\"在-Vue-项目中添加-Pinia-和持久化插件\"><a href=\"#在-Vue-项目中添加-Pinia-和持久化插件\" class=\"headerlink\" title=\"在 Vue 项目中添加 Pinia 和持久化插件\"></a>在 Vue 项目中添加 Pinia 和持久化插件</h2><h3 id=\"1-安装-Pinia-和持久化插件\"><a href=\"#1-安装-Pinia-和持久化插件\" class=\"headerlink\" title=\"1. 安装 Pinia 和持久化插件\"></a>1. 安装 Pinia 和持久化插件</h3><p>使用以下命令安装 Pinia 和 <code>pinia-plugin-persist</code> 插件：</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">yarn</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">add</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">pinia</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">pinia-plugin-persist</span></span></code></pre></div><h3 id=\"2-在-main-ts-中配置-Pinia-和持久化插件\"><a href=\"#2-在-main-ts-中配置-Pinia-和持久化插件\" class=\"headerlink\" title=\"2. 在 main.ts 中配置 Pinia 和持久化插件\"></a>2. 在 main.ts 中配置 Pinia 和持久化插件</h3><p>在 main.ts 文件中导入并使用 Pinia 和持久化插件：</p>\n<div class=\"language-typescript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">typescript</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F07178\"> </span><span style=\"color: #BABED8\">createApp</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">from</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">vue</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #BABED8\"> App </span><span style=\"color: #89DDFF; font-style: italic\">from</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">./App.vue</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F07178\"> </span><span style=\"color: #BABED8\">createPinia</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">from</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">pinia</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #BABED8\"> piniaPluginPersist </span><span style=\"color: #89DDFF; font-style: italic\">from</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">pinia-plugin-persist</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// pinia 数据持久化，存储在 sessionStorage 中</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #BABED8\"> pinia </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">createPinia</span><span style=\"color: #BABED8\">()</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">pinia</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">use</span><span style=\"color: #BABED8\">(piniaPluginPersist)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #BABED8\"> app </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">createApp</span><span style=\"color: #BABED8\">(App)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">app</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">use</span><span style=\"color: #BABED8\">(pinia)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">app</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">mount</span><span style=\"color: #BABED8\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">#app</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">)</span><span style=\"color: #89DDFF\">;</span></span></code></pre></div><h3 id=\"3-在-store-文件夹中添加-index-ts-配置文件\"><a href=\"#3-在-store-文件夹中添加-index-ts-配置文件\" class=\"headerlink\" title=\"3. 在 store 文件夹中添加 index.ts 配置文件\"></a>3. 在 store 文件夹中添加 index.ts 配置文件</h3><p>在 src 目录下创建一个名为 store 的文件夹，并在其中创建 index.ts 文件，添加以下代码：</p>\n<div class=\"language-typescript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">typescript</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F07178\"> </span><span style=\"color: #BABED8\">ref</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">from</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">vue</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F07178\"> </span><span style=\"color: #BABED8\">defineStore</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">from</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">pinia</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #BABED8\"> store </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">defineStore</span><span style=\"color: #BABED8\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">mystore</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">//token</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #C792EA\">const</span><span style=\"color: #F07178\"> </span><span style=\"color: #BABED8\">token</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #82AAFF\">ref</span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #FFCB6B\">string</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #F07178\">(</span><span style=\"color: #89DDFF\">&#39;&#39;</span><span style=\"color: #F07178\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">//... 移除 ...清除  其他操作</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F07178\">  </span><span style=\"color: #BABED8\">token</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #F07178\">persist</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #F07178\">enabled</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FF9CAC\">true</span><span style=\"color: #BABED8\">  </span><span style=\"color: #676E95; font-style: italic\">// 开启数据缓存</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">,</span><span style=\"color: #F07178\">strategies</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> [</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F07178\">storage</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> localStorage</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F07178\">paths</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> [</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">token</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">] </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      ]  </span><span style=\"color: #676E95; font-style: italic\">//自定义存储</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">export</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">default</span><span style=\"color: #BABED8\"> store</span><span style=\"color: #89DDFF\">;</span></span></code></pre></div><h3 id=\"通过以上步骤，你已经成功在-Vue-项目中添加了-Pinia-和持久化插件。\"><a href=\"#通过以上步骤，你已经成功在-Vue-项目中添加了-Pinia-和持久化插件。\" class=\"headerlink\" title=\"通过以上步骤，你已经成功在 Vue 项目中添加了 Pinia 和持久化插件。\"></a>通过以上步骤，你已经成功在 Vue 项目中添加了 Pinia 和持久化插件。</h3>","text":"在 Vue 项目中添加 Pinia 和持久化插件1. 安装 Pinia 和持久化插件使用以下命令安装 Pinia 和 pinia-plugin-persist ...","permalink":"/post/在 Vue 项目中添加 Pinia 和持久化插件","photos":[],"count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"categories":[{"name":"Vue3项目搭建","slug":"Vue3项目搭建","count":4,"path":"api/categories/Vue3项目搭建.json"}],"tags":[{"name":"Yarn","slug":"Yarn","count":4,"path":"api/tags/Yarn.json"},{"name":"Vue","slug":"Vue","count":3,"path":"api/tags/Vue.json"},{"name":"Pinia","slug":"Pinia","count":1,"path":"api/tags/Pinia.json"},{"name":"TavaScript","slug":"TavaScript","count":1,"path":"api/tags/TavaScript.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%9C%A8-Vue-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E6%B7%BB%E5%8A%A0-Pinia-%E5%92%8C%E6%8C%81%E4%B9%85%E5%8C%96%E6%8F%92%E4%BB%B6\"><span class=\"toc-text\">在 Vue 项目中添加 Pinia 和持久化插件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E5%AE%89%E8%A3%85-Pinia-%E5%92%8C%E6%8C%81%E4%B9%85%E5%8C%96%E6%8F%92%E4%BB%B6\"><span class=\"toc-text\">1. 安装 Pinia 和持久化插件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E5%9C%A8-main-ts-%E4%B8%AD%E9%85%8D%E7%BD%AE-Pinia-%E5%92%8C%E6%8C%81%E4%B9%85%E5%8C%96%E6%8F%92%E4%BB%B6\"><span class=\"toc-text\">2. 在 main.ts 中配置 Pinia 和持久化插件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E5%9C%A8-store-%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%AD%E6%B7%BB%E5%8A%A0-index-ts-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">3. 在 store 文件夹中添加 index.ts 配置文件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%80%9A%E8%BF%87%E4%BB%A5%E4%B8%8A%E6%AD%A5%E9%AA%A4%EF%BC%8C%E4%BD%A0%E5%B7%B2%E7%BB%8F%E6%88%90%E5%8A%9F%E5%9C%A8-Vue-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%BA%86-Pinia-%E5%92%8C%E6%8C%81%E4%B9%85%E5%8C%96%E6%8F%92%E4%BB%B6%E3%80%82\"><span class=\"toc-text\">通过以上步骤，你已经成功在 Vue 项目中添加了 Pinia 和持久化插件。</span></a></li></ol></li></ol>","author":{"name":"小刘","slug":"blog-author","avatar":"/images/1.jpg","link":"/","description":"一位正在重塑知识的技术人。作为一名.net后端程序员，我专注于前端和后端技术的开发，热衷于探索新技术并分享我的学习与实践经验。","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"在 Vue 项目中添加 Axios 并进行封装","uid":"a5e64fd52ca9044c117101ca61be5a3e","slug":"在 Vue 项目中添加 Axios 并进行封装","date":"2024-07-19T08:11:35.000Z","updated":"2024-07-19T09:26:32.367Z","comments":true,"path":"api/articles/在 Vue 项目中添加 Axios 并进行封装.json","keywords":null,"cover":null,"text":"在 Vue 项目中添加 Axios 并进行封装1. 安装 Axios使用以下命令安装 Axios： bashyarn add axios2. 创建 Api 文件...","permalink":"/post/在 Vue 项目中添加 Axios 并进行封装","photos":[],"count_time":{"symbolsCount":"6.1k","symbolsTime":"6 mins."},"categories":[{"name":"Vue3项目搭建","slug":"Vue3项目搭建","count":4,"path":"api/categories/Vue3项目搭建.json"}],"tags":[{"name":"Yarn","slug":"Yarn","count":4,"path":"api/tags/Yarn.json"},{"name":"Vue","slug":"Vue","count":3,"path":"api/tags/Vue.json"},{"name":"JavaScript","slug":"JavaScript","count":2,"path":"api/tags/JavaScript.json"},{"name":"Axios","slug":"Axios","count":1,"path":"api/tags/Axios.json"}],"author":{"name":"小刘","slug":"blog-author","avatar":"/images/1.jpg","link":"/","description":"一位正在重塑知识的技术人。作为一名.net后端程序员，我专注于前端和后端技术的开发，热衷于探索新技术并分享我的学习与实践经验。","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"通用Result","uid":"7bdb8fa9005fbdec4c435a665ce88cc2","slug":"通用Result","date":"2024-07-19T08:02:16.977Z","updated":"2024-07-19T08:07:01.956Z","comments":true,"path":"api/articles/通用Result.json","keywords":null,"cover":null,"text":"Result这个可以放在扩展文件夹里 csharpnamespace NET8Project.Api { public class ResultHandle {...","permalink":"/post/通用Result","photos":[],"count_time":{"symbolsCount":937,"symbolsTime":"1 mins."},"categories":[{"name":".NET8 Api框架搭建","slug":"NET8-Api框架搭建","count":5,"path":"api/categories/NET8-Api框架搭建.json"}],"tags":[{"name":".NET","slug":"NET","count":4,"path":"api/tags/NET.json"},{"name":"Result","slug":"Result","count":1,"path":"api/tags/Result.json"}],"author":{"name":"小刘","slug":"blog-author","avatar":"/images/1.jpg","link":"/","description":"一位正在重塑知识的技术人。作为一名.net后端程序员，我专注于前端和后端技术的开发，热衷于探索新技术并分享我的学习与实践经验。","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}